@using global::FormBuilder.Models

<RadzenRow class="vh-100">
    <RadzenColumn Size="8" SizeMD="9" SizeLG="10">
        <RadzenStack Orientation="Orientation.Vertical" Gap="1rem">
            <RadzenFormField Text="Form ID">
                <RadzenTextBox @bind-Value="_formDefinition.Id" ReadOnly="true"/>
            </RadzenFormField>

            <DropZone TData="Action" Drop="(e) => HandleDropField(e)" Zone="FieldsZone">
                <RadzenFieldset Text="Fields">
                    <RadzenStack Orientation="Orientation.Vertical" Gap="0.5rem">
                        @foreach (var field in _formDefinition.Fields)
                        {
                            <Dragable Data="field" Zone="FieldItemZone">
                                <DropZone TData="Field"
                                          Zone="FieldItemZone"
                                          Drop="@((droppingField) => SwapFields(field, droppingField))"
                                          @onclick="@(() => SelectField(field))">
                                    <FormField Field="field" Disabled="true">
                                        <Append>
                                            <RadzenButton
                                                Icon="delete"
                                                Size="ButtonSize.Small"
                                                ButtonStyle="ButtonStyle.Danger"
                                                Click="@(() => RemoveField(field))">
                                            </RadzenButton>
                                        </Append>
                                    </FormField>
                                </DropZone>
                            </Dragable>
                        }
                    </RadzenStack>
                </RadzenFieldset>
            </DropZone>
        </RadzenStack>

    </RadzenColumn>
    <RadzenColumn Class="border bg-light px-1" Size="4" SizeMD="3" SizeLG="2">
        <RadzenStack Class="border-bottom mt-2 pb-2" Orientation="Orientation.Vertical">
            <RadzenText TextStyle="TextStyle.H5" TextAlign="TextAlign.Center">Fields</RadzenText>
            <Dragable Data="() => AddField(FieldType.Text)" Zone="FieldsZone">
                <RadzenButton Class="w-100" Text="Text Field" Click="@(() => AddField(FieldType.Text))"/>
            </Dragable>
            <Dragable Data="() => AddField(FieldType.NumericInt)" Zone="FieldsZone">
                <RadzenButton Class="w-100" Text="Integer Field" Click="() => AddField(FieldType.NumericInt)"/>
            </Dragable>
            <Dragable Data="() => AddField(FieldType.NumericDouble)" Zone="FieldsZone">
                <RadzenButton Class="w-100" Text="Decimal Field" Click="() => AddField(FieldType.NumericDouble)"/>
            </Dragable>
            <Dragable Data="() => AddField(FieldType.Date)" Zone="FieldsZone">
                <RadzenButton Class="w-100" Text="Date Field" Click="() => AddField(FieldType.Date)"/>
            </Dragable>
            <Dragable Data="() => AddField(FieldType.Select)" Zone="FieldsZone">
                <RadzenButton Class="w-100" Text="Select Field" Click="() => AddField(FieldType.Select)"/>
            </Dragable>
        </RadzenStack>
        <RadzenStack Class="mt-3" Orientation="Orientation.Vertical">
            <RadzenText TextStyle="TextStyle.H5" TextAlign="TextAlign.Center">Properties</RadzenText>
            <PropertyEditor @bind-SelectedField="_selectedField" FieldTypeChanged="(e) => HandleFieldTypeChanged(e)"/>
            <RadzenButton Text="Save Form"/>
        </RadzenStack>
    </RadzenColumn>
</RadzenRow>
